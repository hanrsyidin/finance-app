<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>FinanceTracker - Login</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700&amp;family=Noto+Sans:wght@400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#50acf7",
                        "background-light": "#f5f7f8",
                        "background-dark": "#101a22",
                    },
                    fontFamily: {
                        "display": ["Manrope", "Noto Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        }
    </script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-white" x-data="loginForm()">
    <div class="relative min-h-screen w-full flex items-center justify-center overflow-hidden">
        <!-- Abstract Background -->
        <div class="absolute inset-0 w-full h-full bg-[#101a23]">
            <div class="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full bg-primary/10 blur-[120px]"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] rounded-full bg-blue-600/10 blur-[120px]">
            </div>
            <!-- Background Image Pattern -->
            <div class="absolute inset-0 opacity-20 mix-blend-overlay"
                data-alt="Abstract dark geometric wireframe pattern"
                style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCT0Mx5ILK8hMrf3LC0lvD4izk0HaJ1faKApmVcNDC4FMQRjei9aLk8iXOtlyY-_ERmlqUcQ4kfzcyXefffbMeM6M6m9KqHu_mxfY0rJKNwdjEV6jpvygN_nzE5sICEphFAUaTDCUDSVYrN-mM4ZS5jdxc2e6y6EKqGQvH6xnDL2tK6pWAl2An15jOwx-mf4czL3S8YX32ELSq75DTvLEDpeStyqYo9IKgy0KGC5Qzn60vu0uKQS-_5ds4Anv36xM2BunDE2ZtwC50'); background-size: cover; background-position: center;">
            </div>
        </div>

        <!-- Glassmorphism Card -->
        <div
            class="relative w-full max-w-[480px] mx-4 my-8 flex flex-col gap-6 p-8 rounded-2xl border border-white/10 bg-[#182834]/60 backdrop-blur-xl shadow-2xl z-10">
            <!-- Logo Section -->
            <div class="flex items-center justify-center gap-3 text-white mb-2">
                <div class="size-8 text-primary">
                    <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M24 45.8096C19.6865 45.8096 15.4698 44.5305 11.8832 42.134C8.29667 39.7376 5.50128 36.3314 3.85056 32.3462C2.19985 28.361 1.76794 23.9758 2.60947 19.7452C3.451 15.5145 5.52816 11.6284 8.57829 8.5783C11.6284 5.52817 15.5145 3.45101 19.7452 2.60948C23.9758 1.76795 28.361 2.19986 32.3462 3.85057C36.3314 5.50129 39.7376 8.29668 42.134 11.8833C44.5305 15.4698 45.8096 19.6865 45.8096 24L24 24L24 45.8096Z"
                            fill="currentColor"></path>
                    </svg>
                </div>
                <h2 class="text-white text-2xl font-bold leading-tight tracking-[-0.015em]">FinanceTracker</h2>
            </div>

            <!-- Welcome Text -->
            <div class="text-center space-y-2">
                <h1 class="text-3xl font-bold text-white tracking-tight">Welcome Back</h1>
                <p class="text-[#8fb0cc] font-medium text-base">Manage your wealth with confidence.</p>
            </div>

            <!-- Error Message -->
            <div x-show="error" x-transition style="display: none;"
                class="bg-red-500/10 border border-red-500/50 rounded-lg p-3 flex items-center gap-3">
                <span class="material-symbols-outlined text-red-400" style="font-size: 20px;">error</span>
                <span class="text-red-200 text-sm" x-text="error"></span>
            </div>

            <!-- Form Fields -->
            <form @submit.prevent="handleLogin()" class="flex flex-col gap-5 mt-2">
                <!-- Email Field -->
                <label class="flex flex-col gap-2">
                    <span class="text-white text-sm font-medium">Email Address</span>
                    <div
                        class="flex w-full items-center rounded-lg border border-[#304f69]/50 bg-[#101a23]/50 focus-within:border-primary focus-within:ring-1 focus-within:ring-primary transition-all duration-200">
                        <input x-model="email"
                            class="w-full bg-transparent border-none text-white placeholder-[#8fb0cc] px-4 py-3.5 focus:ring-0 text-base font-normal"
                            placeholder="Enter your email" required="" type="email" />
                        <div class="pr-4 text-[#8fb0cc] flex items-center pointer-events-none">
                            <span class="material-symbols-outlined" style="font-size: 20px;">mail</span>
                        </div>
                    </div>
                </label>

                <!-- Password Field -->
                <label class="flex flex-col gap-2">
                    <div class="flex justify-between items-center">
                        <span class="text-white text-sm font-medium">Password</span>
                        <a class="text-xs font-semibold text-primary hover:text-primary/80 transition-colors"
                            href="#">Forgot Password?</a>
                    </div>
                    <div
                        class="flex w-full items-center rounded-lg border border-[#304f69]/50 bg-[#101a23]/50 focus-within:border-primary focus-within:ring-1 focus-within:ring-primary transition-all duration-200">
                        <input x-model="password"
                            class="w-full bg-transparent border-none text-white placeholder-[#8fb0cc] px-4 py-3.5 focus:ring-0 text-base font-normal"
                            placeholder="Enter your password" required="" type="password" />
                        <button
                            class="pr-4 text-[#8fb0cc] hover:text-white flex items-center cursor-pointer transition-colors"
                            type="button">
                            <span class="material-symbols-outlined" style="font-size: 20px;">visibility</span>
                        </button>
                    </div>
                </label>

                <!-- Login Button -->
                <button
                    class="mt-2 flex w-full cursor-pointer items-center justify-center rounded-lg bg-primary py-3.5 text-[#101a23] text-base font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 transition-colors shadow-[0_0_15px_rgba(80,172,247,0.3)] disabled:opacity-70 disabled:cursor-not-allowed"
                    type="submit" :disabled="loading">
                    <span x-show="!loading">Log In</span>
                    <span x-show="loading" class="flex items-center gap-2">
                        <svg class="animate-spin h-5 w-5 text-[#101a23]" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                            </circle>
                            <path class="opacity-75" fill="currentColor"
                                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                            </path>
                        </svg>
                        Logging in...
                    </span>
                </button>
            </form>

            <!-- Social Login Divider -->
            <div class="relative flex py-2 items-center">
                <div class="flex-grow border-t border-[#304f69]/50"></div>
                <span class="flex-shrink-0 mx-4 text-xs font-medium text-[#8fb0cc]">Or continue with</span>
                <div class="flex-grow border-t border-[#304f69]/50"></div>
            </div>

            <!-- Social Buttons -->
            <div class="flex gap-4">
                <button
                    class="flex-1 flex items-center justify-center gap-2 h-10 rounded-lg bg-[#182834] border border-[#304f69]/50 hover:bg-[#223849] transition-colors text-white text-sm font-bold">
                    <svg class="w-5 h-5" fill="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
                            fill="#4285F4"></path>
                        <path
                            d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
                            fill="#34A853"></path>
                        <path
                            d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
                            fill="#FBBC05"></path>
                        <path
                            d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
                            fill="#EA4335"></path>
                    </svg>
                    Google
                </button>
                <button
                    class="flex-1 flex items-center justify-center gap-2 h-10 rounded-lg bg-[#182834] border border-[#304f69]/50 hover:bg-[#223849] transition-colors text-white text-sm font-bold">
                    <svg class="w-5 h-5 text-white" fill="currentColor" viewbox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M17.05 20.28c-.98.95-2.05.88-3.08.35-1.09-.56-2.09-.48-3.08.02-1.06.53-2.19.38-3.05-.53C4.89 17.03 2 11.26 5.56 7.22c1.78-2.01 4.21-1.95 5.63-.48.66.69 1.49.88 2.22.18 1.57-1.5 4.39-1.55 6.43 1.25-3.53 1.77-2.93 6.48.55 8.16-.62 1.45-1.39 2.72-2.34 3.95zM12.03 4.14c.16-2.28 2.16-4.04 4.22-4.14.28 2.53-2.34 4.53-4.22 4.14z">
                        </path>
                    </svg>
                    Apple
                </button>
            </div>

            <!-- Footer -->
            <div class="text-center text-sm font-medium text-[#8fb0cc]">
                Don't have an account?
                <a class="text-primary hover:text-primary/80 transition-colors ml-1 font-bold" href="#">Sign up</a>
            </div>
        </div>
    </div>

    <script>
        function loginForm() {
            return {
                email: '',
                password: '',
                error: '',
                loading: false,

                async handleLogin() {
                    this.error = '';
                    this.loading = true;

                    try {
                        // Determine if we are on localhost to mock delay
                        // In real implementation this calls the API
                        const inDevMode = window.location.hostname === 'localhost';

                        const response = await fetch('/api/login', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                username: this.email, // Backend expects username, we send email
                                password: this.password
                            })
                        });

                        const data = await response.json();

                        if (!response.ok) {
                            throw new Error(data.message || 'Login failed. Please check your credentials.');
                        }

                        // Redirect to dashboard on success
                        window.location.href = '/dashboard';

                    } catch (err) {
                        console.error(err);
                        this.error = err.message || 'An error occurred';
                        this.loading = false;
                    }
                }
            }
        }
    </script>
</body>

</html>